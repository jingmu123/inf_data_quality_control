## reclean2_mimic_iv_discharge

### 1.删除换行1修改（小写字母或数字之间）

增加连接符：&、~
补充出现两句话之间不止有换行符，还有有空格的情况，例如：
xxx
换行符 空格
xxx

```
[r'([a-z，,0-9’;()/] *(?:>|<|\+|\–|%|\'|≥|=|≤|-|&|~)* *)(\n+(?: *\n)?)( *(?:>|<|\+|:|%|\'|≥|=|≤|&|~)* *(["“,，./a-z‘)][^.]|\d+[^.][^.\\])|\(.{3,}\))',r'\1 删除换行1 \3']
```

### 2.两条删除换行4修改（大小写字母之间）

增加连接符：%、-+
去除符号限制#，出现较多句子中出现#，但是不是标题或者有存在多余换行问题
小写字母与大写字母修改：

```
[r'(\n|^)( ?(?:[^\n•●© ]{1,} +){5,}[^\n ]*[a-z，,0-9’;(/%\-+] *)(\n+)( *[A-Z][^.][^#\n•●©·]*(?:(?:\d[:：]\d)*[^\n•●©>·:：])*(?:\n|$))',r'\1\2 删除换行4 \4']
```

大写字母与小写字母修改：

```
[r'(\n|^)( ?(?:[^\n•●©· ]{1,} +){5,}[^\n ]*[A-Z] *[-&]* *)(\n+)( *[a-z，,0-9’;)/][^.][^#\n•●©·:：]*(?:(?:\d[:：]\d)*[^\n•●©>·])*(?:\n|$))',r'\1\2 删除换行4 \4']
```

### 3.两条删除换行8修改（填空位置多余换行）

3.1上一段文本填空位置多余换行
增加一种情况：上一段结尾是Mr. ___ 时，需要删除换行
允许下一段文本开头字母是大写，例如：
xxx___
Xxx
增加连接符：-+

```
[r'((?:[a-z，,]|[DM]r.)[_ ]*(?:_)+[ -+]*)(\n+)( *[,，a-zA-Z‘)."“][^.])', r'\1 删除换行8 \3'],
```

3.2 下一段文本填空位置多余换行
增加连接符：-+

```
[r'([a-z，,] *)(\n+)( *(?:_)+ *[-+,，a-z‘).][^.])', r'\1 删除换行8 \3'],
```

### 4.有序号特征的位置多余换行

例如：
....dc was
0.7, she......
.......given
0.5 mg.......
......to 
p.o. BID......
因为为了避免连接到序号开头的小标题，这类多余换行只能单独写一条，增加限制条件，小数后面带单位或逗号，字母小数点后面还有字母非空格，增加删除换行

```
[r'([a-z，,0-9’;()/] *(?:>|<|\+|\–|%|\'|≥|=|≤|-|&)* *)(\n+(?: *\n)?)( *(?:>|<|\+|:|%|\'|≥|=|≤|&|~)* *(?:(?:[\d]+\.\d) *(?:[,，]|mg)|(?:[A-Za-z]\.[a-zA-Z])))',r'\1 删除换行14 \3'],
```

### 5.大写字母之间多余换行

例如：

1. Morphine Concentrate 20 mg/mL Solution Sig: 10 to 30  mg PO 
  Q1H as.....
  直接删除换行容易误删，但是这类情况也比较多，增加长度限制，上下段都必须长度错过五个单词，并且不能有标题特征的符号:、 -。

  ```
  [r'(\n|^)( ?(?:[^\n•●© ]{1,} +){5,}[^\n ]+[A-Z] *)(\n+)( *[A-Z][^\n\.:： \-]{1,} +(?:[^\n•●©:： -]{1,} +){5,}.*)',r'\1\2 删除换行15 \4'],
  ```

  

### 6.大写字母与括号内容多余换行

例如：

Docusate Sodium 50 mg/5 mL Liquid Sig: Ten  mls ___ TID __

(3 times a day).  

增加删除换行：

```
[r'(\n|^)((?:[^#\n•●©· ]{1,} +){5,}[^\n ]*[A-Z] *)(\n+)( *\(.{3,}\).*(?:\n|$))',r'\1\2 删除换行12 \4'],
```

### 7.两个填空之间多余换行

例如：
Ms. ___ is a ___ female with PMH of THR at ___

___ that was 
只有下一个填空后是英文句号或者其他正常结尾符号，或者是字母才可以删除换行，增加删除换行

```
[r'(\n|^)([^\n_].*(?:[DM]r\.|[A-Za-z]) *_{3}[_ ]*)(\n+)(\(?_{3}[_ ]*\)? *[\.!?a-zA-Z])',r'\1\2 删除换行13 \4'],
```

