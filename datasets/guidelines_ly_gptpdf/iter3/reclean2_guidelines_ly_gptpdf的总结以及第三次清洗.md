reclean2_guidelines_ly_gptpdf的总结以及第三次清洗

出现新形式的无关文本[E58,59]

```
[
    r'([^\d])(\[\s?[\d]{1,4}(\s{0,3}[\-–—,\.]\s{0,3}[\d]{1,4}){0,20}\s?\])',
    r'\1删除12:<u>\2</u>'
],
修改为
[
    r'([^\d])(\[\s?[\dA-Za-z]{1,4}(\s{0,3}[\-–\^~—,\.]\s{0,3}[\dA-Za-z]{1,4}){0,20}\s?\])',
    r'\1删除12:<u>\2</u>'
],
```

中文里的无关数字引用，之前的代码都是对无关数字的删除

![image-20240805164128035](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240805164128035.png)

```
[
    r'([。！？]{1,3}\s?)(\d+([\-—，]\d+){0,3})([。！？\s]{0,3})?$',   # 匹配在段落结尾出现的  \d+。或 。\d+
    r'\1删除26:<u>\2</u>\4'
],
# 27 28一定要分开只能一边有中文，否则会将中文中间的数字都删掉，且这里的标点只能是表示句子结束的标点，半句出现数字是常见的
[
    r'([。！？]\s?)(\d+([\-—，,]\d+){0,3})([。！？\u4e00-\u9fa5])',    # 匹配[。！？,]\d+[。！？,\u4e00-\u9fa5]
    r'\1删除27:<u>\2</u>\4'
],
[
    r'([。！？\u4e00-\u9fa5]\s?)(\d+([\-—，,]\d+){0,3})([。！？])',  # 匹配[。！？,\u4e00-\u9fa5]\d+[。！？,]
    r'\1删除28:<u>\2</u>\4'
]
```



出现致谢（Acknowledgment）后面都是无关内容的情况，加入中英文致谢

```
if re.search(r'^#{1,3}\s?(Reference|Suggested Reading|参考文献|Acknowledgment|致谢)s?',item.strip()):
    references_started = True
```



无关页码  ， 如果一个段落只有一个数字没有点，#或其它符号

```
[r'(^\d$)',r'删除31:<u>\1</u>']
```

错误删除66个

1.将clean_en中模型判断参考文献的方法拿过来，为了避免一些出现半页参考的误删

2.(本页删除)本页发现目录的特征   目录删除   （误删存在26个，误删存在较多不必要）

这里在判断目录特征只有一条

mulu = 1 if re.search(r'[\.\s]{15,}', item) else 0

```
删除这个判断的步骤
elif mulu_num > 0:
    new_context.insert(0, "(本页删除)本页发现目录的特征")
```

3.使用特征判定为目录页不准   stap5已删（误删6个）

4.参考删除1有点问题，不管是参考删除第几条规则当时是写给英文的，到了中文里面全是误删，也可以加个限制条件中文跳过去（误删3个）

```
如果句子中没有发现中文再进行参考判断
elif not re.search("[\u4e00-\u9fa5]",item):
    item = self.step4_rm_cite(item)
```











刘凯

**问题处理：**

​            1.     无关文本[^7][^8]等。

原无关文本处理[r'(\[\s?\d{1,4}(\s{0,3}[\-–—，,\.]+\s{0,3}\d{1,4}){0,20}\s?\]\s?\*?)',r'删除12:<u>\1</u>']进行补充修改，为[r'(\[\s?\^?\d{1,4}(\s{0,3}[\-–\^~—,\.]+\s{0,3}\d{1,4}){0,20}\s?\]\s?\*?)',r'删除12:<u>\1</u>']。

​            2.     错误删除。

原无关文本删除13：[r'([^\d])([1-9][0-9]{1,4}(\s{0,3}[\-–,\.]\s{1,3}[1-9][0-9]{1,4}){1,20})([^\d]?)',r'\1删除13:<u>\2</u>\4']对（$RR=0.27, 95%CI：0.19-0.40，P<0.001$）（$RR=0.30, 95%CI：0.13-0.68, P=0.004$）进行误删，补充修改为[ r'([^\d\.])([1-9][0-9]{1,4}(\s{0,3}[\-–,\.]\s{1,3}[1-9][0-9]{1,4}){1,20})([^\d\%]?)',r'\1删除13:<u>\2</u>\4']。

​            3.     无关本数字上标， ⁶⁴、⁶⁸等。

补充正则进行删除，[r'([\u2070-\u2079\u2080-\u2089¹]+)',r'删除26:<u>\1</u>']。

​            4.     句末无关文本(1A)、(2B)等。

补充删除[r'([\(（] *(\d+[\-,]?[A-Za-z]+) *[\)）])', r'删除27:<u>\1</u>']。

​            5.     无关数字角标^91-93^、^94-97^等。

原正则[r'(\^\d+(\s?,\s?\d+){0,5}\^)', r'删除21:<u>\1</u>']无法删除^91-93^这类情况，补充修改为[r'(\^\d+([\s,\-\d+]{0,6})+\^)', r'删除21:<u>\1</u>']。

​            6.     补充无关文本★、☆。

​            7.     无关文本**、**\\[26\\]**、**\\[27\\]**、**\\[20-23\\]**。

补充删除[r'((\\+\[\d+[ ,\-\d]*\\+\])|\*+)', r'删除28:<u>\1</u>']。

​            8.     补充无关数字角标[7~9]、[9~12]情况。